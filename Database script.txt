CREATE TABLE players (
  player_id INTEGER PRIMARY KEY AUTOINCREMENT,
  username VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL
);

CREATE TABLE cards (
  card_id INTEGER PRIMARY KEY AUTOINCREMENT,
  name VARCHAR(255) NOT NULL,
  damage INTEGER NOT NULL,
  element_type VARCHAR(255) NOT NULL,
  card_type VARCHAR(255) NOT NULL CHECK (card_type IN ('spell', 'monster'))
);

CREATE TABLE stacks (
  stack_id INTEGER PRIMARY KEY AUTOINCREMENT,
  player_id INTEGER NOT NULL,
  FOREIGN KEY (player_id) REFERENCES players(player_id)
);

CREATE TABLE stack_cards (
  stack_id INTEGER NOT NULL,
  card_id INTEGER NOT NULL,
  FOREIGN KEY (stack_id) REFERENCES stacks(stack_id),
  FOREIGN KEY (card_id) REFERENCES cards(card_id)
);

CREATE TABLE packages (
  package_id INTEGER PRIMARY KEY AUTOINCREMENT,
  player_id INTEGER NOT NULL,
  FOREIGN KEY (player_id) REFERENCES players(player_id)
);

CREATE TABLE package_cards (
  package_id INTEGER NOT NULL,
  card_id INTEGER NOT NULL,
  FOREIGN KEY (package_id) REFERENCES packages(package_id),
  FOREIGN KEY (card_id) REFERENCES cards(card_id)
);

CREATE TABLE decks (
  deck_id INTEGER PRIMARY KEY AUTOINCREMENT,
  player_id INTEGER NOT NULL,
  FOREIGN KEY (player_id) REFERENCES players(player_id)
);

CREATE TABLE deck_cards (
  deck_id INTEGER NOT NULL,
  card_id INTEGER NOT NULL,
  FOREIGN KEY (deck_id) REFERENCES decks(deck_id),
  FOREIGN KEY (card_id) REFERENCES cards(card_id)
);

CREATE TABLE battles (
  battle_id INTEGER PRIMARY KEY AUTOINCREMENT,
  player1_id INTEGER NOT NULL,
  player2_id INTEGER NOT NULL,
  FOREIGN KEY (player1_id) REFERENCES players(player_id),
  FOREIGN KEY (player2_id) REFERENCES players(player_id)
);
